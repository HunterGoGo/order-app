# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
- 주문하기 화면(메뉴 선택 및 장바구니 기능)
- 관리자 화면(재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프런트엔드: HTML, CSS, 리액트, 자바스크립트
- 백엔드: Node.js, Express
- 데이터베이스: PostgreSQL

## 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 주문하기 화면 PRD

### 4.1 화면 개요
사용자가 커피 메뉴를 선택하고 장바구니에 담아 주문할 수 있는 메인 화면입니다.

### 4.2 화면 레이아웃

#### 4.2.1 헤더 영역
- **위치**: 화면 최상단
- **구성 요소**:
  - **로고**: 좌측 상단에 "COZY" 텍스트 표시 (다크 그린 배경)
  - **주문하기 버튼**: 우측 상단, 현재 화면을 나타내는 버튼 (라이트 그레이 배경, 다크 그린 테두리)
  - **관리자 버튼**: 우측 상단, 관리자 화면으로 이동하는 버튼 (라이트 그레이 배경, 다크 그린 테두리)

#### 4.2.2 메뉴 아이템 섹션
- **위치**: 헤더 아래, 화면 중앙 영역
- **레이아웃**: 메뉴 카드들이 가로로 배치 (반응형 그리드 레이아웃)
- **메뉴 카드 구성 요소**:
  - **메뉴 이미지**: 카드 상단에 메뉴 이미지 영역 (플레이스홀더: 대각선이 그어진 흰색 사각형)
  - **메뉴명**: 이미지 아래에 메뉴 이름 표시 (예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼")
  - **가격**: 메뉴명 아래에 가격 표시 (예: "4,000원", "5,000원")
  - **설명**: 가격 아래에 간단한 설명 텍스트 영역 (예: "간단한 설명...")
  - **옵션 체크박스**:
    - "샷 추가 (+500원)" 체크박스
    - "시럽 추가 (+0원)" 체크박스
  - **담기 버튼**: 카드 하단에 "담기" 버튼 (라이트 그레이 배경)

#### 4.2.3 장바구니 섹션
- **위치**: 화면 하단
- **배경**: 라이트 그레이 배경, 다크 그레이 테두리
- **구성 요소**:
  - **제목**: 좌측 상단에 "장바구니" 텍스트 표시
  - **장바구니 아이템 목록**:
    - 각 아이템은 다음 정보를 표시:
      - 메뉴명 및 선택된 옵션 (예: "아메리카노(ICE) (샷 추가)")
      - 수량 (예: "X 1", "X 2")
      - 가격 (예: "4,500원", "8,000원")
  - **총 금액**: 목록 아래에 "총 금액" 텍스트와 함께 총액 표시 (총액은 굵은 글씨로 강조, 예: "총 금액 12,500원")
  - **주문하기 버튼**: 총 금액 아래에 "주문하기" 버튼 (라이트 그레이 배경, 다크 그레이 테두리)

### 4.3 기능 요구사항

#### 4.3.1 메뉴 조회
- 서버에서 커피 메뉴 목록을 조회하여 화면에 표시
- 각 메뉴는 이미지, 이름, 가격, 설명 정보를 포함

#### 4.3.2 옵션 선택
- 사용자는 각 메뉴 카드에서 옵션을 선택할 수 있음:
  - "샷 추가" 옵션 선택 시 추가 가격(+500원)이 적용됨
  - "시럽 추가" 옵션 선택 시 추가 가격(+0원)이 적용됨
- 옵션은 체크박스 형태로 선택/해제 가능

#### 4.3.3 장바구니 담기
- "담기" 버튼 클릭 시:
  - 선택된 메뉴와 옵션이 장바구니에 추가됨
  - 옵션이 선택된 경우 메뉴명에 옵션 정보가 표시됨 (예: "아메리카노(ICE) (샷 추가)")
  - 가격은 기본 가격 + 선택된 옵션의 추가 가격으로 계산됨
  - 동일한 메뉴와 옵션 조합이 이미 장바구니에 있으면 수량이 증가함

#### 4.3.4 장바구니 관리
- 장바구니에 담긴 아이템 목록 표시:
  - 메뉴명 및 옵션 정보
  - 수량
  - 개별 아이템 가격
- 총 금액 자동 계산 및 표시:
  - 모든 장바구니 아이템의 가격 합계
  - 실시간으로 업데이트됨

#### 4.3.5 주문하기
- "주문하기" 버튼 클릭 시:
  - 장바구니에 담긴 모든 아이템을 주문으로 전송
  - 주문 성공 시 장바구니 초기화
  - 주문 완료 메시지 표시 (선택 사항)

#### 4.3.6 화면 이동
- "관리자" 버튼 클릭 시 관리자 화면으로 이동

### 4.4 UI/UX 요구사항

#### 4.4.1 색상
- **주요 색상**: 다크 그린 (로고, 버튼 테두리)
- **배경 색상**: 라이트 그레이 (버튼, 장바구니 영역)
- **테두리 색상**: 다크 그레이 (장바구니 영역)

#### 4.4.2 반응형 디자인
- 메뉴 카드는 화면 크기에 따라 가로로 배치되며, 작은 화면에서는 세로로 스택됨
- 모바일 환경에서도 사용 가능하도록 최적화

#### 4.4.3 사용자 피드백
- 버튼 클릭 시 시각적 피드백 제공 (호버 효과, 클릭 효과)
- 장바구니에 아이템이 추가될 때 시각적 피드백 제공

### 4.5 데이터 구조

#### 4.5.1 메뉴 데이터
```javascript
{
  id: number,
  name: string,
  price: number,
  description: string,
  imageUrl: string,
  options: [
    {
      id: number,
      name: string,
      price: number
    }
  ]
}
```

#### 4.5.2 장바구니 아이템 데이터
```javascript
{
  menuId: number,
  menuName: string,
  basePrice: number,
  selectedOptions: [
    {
      optionId: number,
      optionName: string,
      optionPrice: number
    }
  ],
  quantity: number,
  totalPrice: number
}
```

### 4.6 API 요구사항

#### 4.6.1 메뉴 조회
- **엔드포인트**: `GET /api/menus`
- **응답**: 메뉴 목록 배열

#### 4.6.2 주문 생성
- **엔드포인트**: `POST /api/orders`
- **요청 본문**: 장바구니 아이템 배열
- **응답**: 생성된 주문 정보

## 5. 관리자 화면 PRD

### 5.1 화면 개요
관리자가 주문을 관리하고 재고를 조정할 수 있는 관리자 전용 화면입니다.

### 5.2 화면 레이아웃

#### 5.2.1 헤더 영역
- **위치**: 화면 최상단
- **구성 요소**:
  - **로고**: 좌측 상단에 "COZY" 텍스트 표시 (다크 그린 배경)
  - **주문하기 버튼**: 우측 상단, 주문하기 화면으로 이동하는 버튼 (라이트 그레이 배경, 다크 그린 테두리)
  - **관리자 버튼**: 우측 상단, 현재 화면을 나타내는 버튼 (라이트 그레이 배경, 다크 그린 테두리, 활성화 상태 표시)

#### 5.2.2 관리자 대시보드 섹션
- **위치**: 헤더 아래, 화면 상단 영역
- **제목**: "관리자 대시보드" 텍스트 표시
- **통계 요약**: 제목 아래에 주문 상태별 통계를 한 줄로 표시
  - 형식: "총 주문 {총 주문 수} / 주문 접수 {주문 접수 수} / 제조 중 {제조 중 수} / 제조 완료 {제조 완료 수}"
  - 예시: "총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조 완료 0"

#### 5.2.3 재고 현황 섹션
- **위치**: 관리자 대시보드 아래
- **제목**: "재고 현황" 텍스트 표시
- **레이아웃**: 재고 카드들이 가로로 배치 (반응형 그리드 레이아웃)
- **재고 카드 구성 요소**:
  - **메뉴명**: 카드 상단에 메뉴 이름 표시 (예: "아메리카노 (ICE)", "아메리카노 (HOT)", "카페라떼")
  - **재고 수량**: 메뉴명 아래에 현재 재고 수량 표시 (예: "10개")
  - **재고 조정 버튼**:
    - **증가 버튼 (+)**: 재고 수량을 1 증가시키는 버튼 (작은 사각형 버튼, 좌측)
    - **감소 버튼 (-)**: 재고 수량을 1 감소시키는 버튼 (작은 사각형 버튼, 우측)

#### 5.2.4 주문 현황 섹션
- **위치**: 재고 현황 아래, 화면 하단 영역
- **제목**: "주문 현황" 텍스트 표시
- **주문 목록**: 각 주문을 리스트 형태로 표시
  - **주문 항목 구성 요소**:
    - **주문 시간**: 주문이 생성된 날짜와 시간 표시 (예: "7월 31일 13:00")
    - **주문 내용**: 주문된 메뉴와 수량 표시 (예: "아메리카노(ICE) x 1")
    - **주문 금액**: 주문 총액 표시 (예: "4,000원")
    - **주문 접수 버튼**: 주문을 접수 처리하는 버튼 (사각형 버튼, 주문 항목 옆에 배치)

### 5.3 기능 요구사항

#### 5.3.1 대시보드 통계 조회
- 서버에서 주문 상태별 통계를 조회하여 실시간으로 표시:
  - 총 주문 수: 모든 주문의 총 개수
  - 주문 접수 수: 상태가 "주문 접수"인 주문 개수
  - 제조 중 수: 상태가 "제조 중"인 주문 개수
  - 제조 완료 수: 상태가 "제조 완료"인 주문 개수
- 주문 상태가 변경될 때마다 통계가 자동으로 업데이트됨

#### 5.3.2 재고 조회
- 서버에서 각 메뉴의 현재 재고 수량을 조회하여 표시
- 재고는 실시간으로 업데이트됨

#### 5.3.3 재고 조정
- **재고 증가**: "+" 버튼 클릭 시:
  - 해당 메뉴의 재고 수량이 1 증가
  - 서버에 재고 업데이트 요청 전송
  - 성공 시 화면에 즉시 반영
- **재고 감소**: "-" 버튼 클릭 시:
  - 해당 메뉴의 재고 수량이 1 감소
  - 재고가 0보다 작아지지 않도록 검증 (0 이하로 감소 불가)
  - 서버에 재고 업데이트 요청 전송
  - 성공 시 화면에 즉시 반영

#### 5.3.4 주문 목록 조회
- 서버에서 주문 목록을 조회하여 표시
- 주문 목록은 최신 주문부터 표시 (내림차순)
- 각 주문은 다음 정보를 포함:
  - 주문 시간 (날짜 및 시간)
  - 주문된 메뉴와 수량
  - 주문 총액

#### 5.3.5 주문 상태 관리
- **주문 접수**: "주문 접수" 버튼 클릭 시:
  - 해당 주문의 상태를 "주문 접수"로 변경
  - 주문된 메뉴의 재고가 자동으로 차감됨
  - 재고가 부족한 경우 경고 메시지 표시 및 주문 접수 불가
  - 주문 접수 후 버튼은 "제조 중" 버튼으로 변경되거나 다음 상태로 전환 가능
- **제조 중**: 주문 접수 후 제조 시작 시 상태를 "제조 중"으로 변경
- **제조 완료**: 제조가 완료되면 상태를 "제조 완료"로 변경

#### 5.3.6 화면 이동
- "주문하기" 버튼 클릭 시 주문하기 화면으로 이동

### 5.4 UI/UX 요구사항

#### 5.4.1 색상
- **주요 색상**: 다크 그린 (로고, 버튼 테두리)
- **배경 색상**: 흰색 (화면 배경), 라이트 그레이 (버튼)
- **텍스트 색상**: 다크 그레이 (일반 텍스트)
- **활성화 상태**: 관리자 버튼은 다크 테두리로 활성화 상태 표시

#### 5.4.2 반응형 디자인
- 재고 카드는 화면 크기에 따라 가로로 배치되며, 작은 화면에서는 세로로 스택됨
- 주문 목록은 화면 크기에 따라 스크롤 가능
- 모바일 환경에서도 사용 가능하도록 최적화

#### 5.4.3 사용자 피드백
- 버튼 클릭 시 시각적 피드백 제공 (호버 효과, 클릭 효과)
- 재고 조정 시 즉시 화면에 반영되어 피드백 제공
- 주문 접수 시 주문 항목의 시각적 변화로 상태 변경 표시
- 재고 부족 시 경고 메시지 표시

#### 5.4.4 실시간 업데이트
- 주문이 새로 생성되면 주문 목록에 자동으로 추가됨
- 주문 상태가 변경되면 대시보드 통계가 자동으로 업데이트됨
- 재고가 변경되면 재고 현황이 자동으로 업데이트됨

### 5.5 데이터 구조

#### 5.5.1 재고 데이터
```javascript
{
  menuId: number,
  menuName: string,
  stock: number
}
```

#### 5.5.2 주문 데이터
```javascript
{
  id: number,
  orderTime: string, // ISO 8601 형식 또는 타임스탬프
  items: [
    {
      menuId: number,
      menuName: string,
      quantity: number,
      options: [
        {
          optionId: number,
          optionName: string
        }
      ],
      price: number
    }
  ],
  totalPrice: number,
  status: string // "주문 접수", "제조 중", "제조 완료"
}
```

#### 5.5.3 대시보드 통계 데이터
```javascript
{
  totalOrders: number,
  receivedOrders: number,
  manufacturingOrders: number,
  completedOrders: number
}
```

### 5.6 API 요구사항

#### 5.6.1 대시보드 통계 조회
- **엔드포인트**: `GET /api/admin/dashboard`
- **응답**: 주문 상태별 통계 객체

#### 5.6.2 재고 조회
- **엔드포인트**: `GET /api/admin/inventory`
- **응답**: 재고 목록 배열

#### 5.6.3 재고 업데이트
- **엔드포인트**: `PUT /api/admin/inventory/:menuId`
- **요청 본문**: `{ stock: number }`
- **응답**: 업데이트된 재고 정보

#### 5.6.4 주문 목록 조회
- **엔드포인트**: `GET /api/admin/orders`
- **쿼리 파라미터**: 
  - `status` (선택): 주문 상태 필터링
  - `limit` (선택): 조회할 주문 개수 제한
- **응답**: 주문 목록 배열

#### 5.6.5 주문 상태 업데이트
- **엔드포인트**: `PUT /api/admin/orders/:orderId/status`
- **요청 본문**: `{ status: string }`
- **응답**: 업데이트된 주문 정보

#### 5.6.6 주문 접수 (재고 차감 포함)
- **엔드포인트**: `POST /api/admin/orders/:orderId/receive`
- **응답**: 접수된 주문 정보 및 재고 차감 결과
- **비즈니스 로직**: 
  - 주문 상태를 "주문 접수"로 변경
  - 주문된 메뉴의 재고를 자동으로 차감
  - 재고 부족 시 에러 반환